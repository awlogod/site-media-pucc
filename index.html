<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de M√©dias - PUC Campinas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="logo.png" alt="Logo AvaliaPucc" id="siteLogo" class="site-logo">
            </div>
            <h1>üìö AvaliaPuc</h1>
            <p>Calculadora que gerencia suas notas e calcula as m√©dias por mat√©ria</p>
        </header>

        <main>
            <!-- Se√ß√£o de Login -->
            <section class="card" id="loginCard">
                <h2>Identifica√ß√£o</h2>
                <div class="input-group">
                    <input type="text" id="nomeAluno" placeholder="Nome completo">
                </div>
                <div class="input-group">
                    <input type="text" id="raAluno" placeholder="RA (Registro Acad√™mico - 8 d√≠gitos)" maxlength="8" oninput="validarRA()">
                </div>
                <div id="erroRA" class="mensagem-erro" style="display: none;"></div>
                <div class="input-group">
                    <select id="cursoAluno" required>
                        <option value="">Selecione seu curso</option>
                        <option value="engenharia">Engenharia de Computa√ß√£o</option>
                        <option value="ciencias_dados">Ci√™ncias de Dados e IA</option>
                    </select>
                </div>
                <button onclick="acessarMaterias()">Acessar Mat√©rias</button>
            </section>

            <!-- Informa√ß√µes do Aluno -->
            <section class="card" id="infoAluno" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                    <h2 id="infoAlunoTexto" style="margin: 0; flex: 1;"></h2>
                    <button onclick="voltarAoInicio()" class="btn-voltar-inicio">‚Üê Voltar ao In√≠cio</button>
                </div>
            </section>

            <!-- Lista de Mat√©rias -->
            <div id="listaMaterias"></div>

            <!-- F√≥rum de Dicas, Melhorias e D√∫vidas -->
            <section class="card forum-card" id="forumCard" style="display: none;">
                <div class="forum-header">
                    <h2>üí¨ F√≥rum de Dicas, Melhorias e D√∫vidas</h2>
                    <p class="forum-description">Compartilhe suas ideias, sugest√µes e tire suas d√∫vidas com a comunidade!</p>
                </div>
                
                <!-- Abas do F√≥rum -->
                <div class="forum-tabs">
                    <button class="forum-tab active" onclick="filtrarForum('todas')" data-categoria="todas">
                        üìã Todas
                    </button>
                    <button class="forum-tab" onclick="filtrarForum('dicas')" data-categoria="dicas">
                        üí° Dicas
                    </button>
                    <button class="forum-tab" onclick="filtrarForum('melhorias')" data-categoria="melhorias">
                        ‚ú® Melhorias
                    </button>
                    <button class="forum-tab" onclick="filtrarForum('duvidas')" data-categoria="duvidas">
                        ‚ùì D√∫vidas
                    </button>
                </div>

                <!-- Lista de Mensagens -->
                <div class="forum-mensagens" id="forumMensagens">
                    <!-- Mensagens ser√£o inseridas aqui via JavaScript -->
                </div>

                <!-- Formul√°rio para Nova Mensagem -->
                <div class="forum-form-container">
                    <h3>‚ûï Adicionar Nova Mensagem</h3>
                    <form id="forumForm" onsubmit="adicionarMensagemForum(event)">
                        <div class="input-group">
                            <select id="forumCategoria" required>
                                <option value="">Selecione a categoria</option>
                                <option value="dicas">üí° Dica</option>
                                <option value="melhorias">‚ú® Melhoria</option>
                                <option value="duvidas">‚ùì D√∫vida</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <textarea id="forumMensagem" 
                                      placeholder="Digite sua mensagem aqui..." 
                                      rows="4"
                                      required></textarea>
                        </div>
                        <button type="submit" class="btn-enviar-forum">
                            üì§ Publicar Mensagem
                        </button>
                    </form>
                    <div id="forumMensagemStatus" class="forum-mensagem-status" style="display: none;"></div>
                </div>
            </section>

            <!-- Detalhes da Mat√©ria Selecionada -->
            <section class="card" id="detalhesMateria" style="display: none;">
                <div class="detalhes-header">
                    <h2 id="nomeMateriaSelecionada"></h2>
                    <button class="btn-voltar" onclick="voltarParaLista()">‚Üê Voltar</button>
                </div>

                <!-- M√©dia Te√≥rica -->
                <div class="opcao-media">
                    <h3>üìñ M√©dia Te√≥rica</h3>
                    <div class="media-resultado">
                        <span class="media-label">M√©dia:</span>
                        <span class="media-valor" id="mediaTeorica">0.00</span>
                    </div>
                    <div class="notas-container" id="notasTeoricas"></div>
                </div>

                <!-- M√©dia Pr√°tica -->
                <div class="opcao-media">
                    <h3>üî¨ M√©dia Pr√°tica</h3>
                    <div class="media-resultado">
                        <span class="media-label">M√©dia:</span>
                        <span class="media-valor" id="mediaPratica">0.00</span>
                    </div>
                    <div class="notas-container" id="notasPraticas"></div>
                </div>

                <!-- M√©dia Final -->
                <div class="opcao-media">
                    <h3>üìä M√©dia Final</h3>
                    <div class="media-resultado soma-medias">
                        <span class="media-label">M√©dia Final:</span>
                        <span class="media-valor" id="somaMedias">0.00</span>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Andr√© Wilckay. Todos os direitos reservados.</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // ============================================
        // CONFIGURA√á√ÉO DO FIREBASE
        // ============================================
        // IMPORTANTE: Substitua os valores abaixo com suas credenciais do Firebase
        // Veja o arquivo SETUP_FIREBASE.md para instru√ß√µes detalhadas
        // ============================================
        
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Verificar se o Firebase est√° configurado
        const firebaseConfigurado = firebaseConfig.apiKey !== "YOUR_API_KEY" && 
                                   firebaseConfig.projectId !== "YOUR_PROJECT_ID";

        if (firebaseConfigurado) {
            try {
                // Initialize Firebase
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                
                // Tornar db dispon√≠vel globalmente
                window.db = db;
                window.firebaseConfigurado = true;
                console.log('‚úÖ Firebase configurado com sucesso!');
            } catch (error) {
                console.error('‚ùå Erro ao inicializar Firebase:', error);
                window.firebaseConfigurado = false;
            }
        } else {
            console.warn('‚ö†Ô∏è Firebase n√£o configurado. O f√≥rum usar√° localStorage como fallback.');
            console.warn('üìñ Veja SETUP_FIREBASE.md para instru√ß√µes de configura√ß√£o.');
            window.firebaseConfigurado = false;
        }
    </script>
    
    <script src="script.js"></script>
</body>
</html>

